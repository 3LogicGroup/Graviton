# Шаблон Zabbix для мониторинга серверов Гравитон через API Redfish

## Обзор

Этот шаблон Zabbix позволяет осуществлять мониторинг серверов Гравитон с использованием API Redfish. Он обеспечивает контроль за состоянием здоровья сервера, способствуя проактивному устранению сбоев.

## Возможности

- **Мониторинг здоровья оборудования**: Отслеживание здоровья и статуса критически важных компонентов аппаратного обеспечения, таких как ЦПУ, память, хранилища и блоки питания.
- **Показатели производительности**: Сбор данных о производительности аппаратного обеспечения, включая показания температуры, скорости вращения вентиляторов и потребление энергии.
- **Оповещения и уведомления**: Триггеры показателей производительности используют пороговые схемы, установленные производителем аппаратного обеспечения.

## Предварительные требования

- Установленный и работающий сервер Zabbix (рекомендуется версия 5.0 или новее).
- Сетевое соединение между сервером Zabbix и серверами Гравитон.
- Доступ к серверам Гравитон через API Redfish.

## Установка

1. **Загрузка шаблона**
   - Загрузите шаблон Zabbix для мониторинга серверов Гравитон.

2. **Импорт шаблона в Zabbix**
   - Перейдите в веб-интерфейс Zabbix.
   - Перейдите в **Конфигурация (Сбор данных)** > **Шаблоны**.
   - Нажмите **Импорт** в верхнем правом углу.
   - Выберите загруженный файл шаблона и нажмите **Импорт**.

3. **Настройка хоста**
   - Добавьте новый хост или выберите существующий, представляющий ваш сервер Гравитон.
   - Перейдите в **Конфигурация  (Сбор данных)** > **Узлы сети** и нажмите **Создать узел сети** или выберите существующий.
   - В поле **Шаблоны** свяжите импортированный шаблон с хостом.

## Настройка

### Пользовательские макросы

Для подключения к серверам Гравитон через API Redfish настройте следующие пользовательские макросы на уровне хоста:

- `{$API.URL}`: URL-адрес конечной точки API Redfish.
- `{$API.USER}`: Имя пользователя для аутентификации в API.
- `{$API.PASSWORD}`: Пароль для аутентификации в API.

### Настройка макросов

1. Перейдите в **Конфигурация (Сбор данных)** > **Узлы сети** и выберите хост.
2. Перейдите на вкладку **Макросы**.
3. Добавьте каждый из перечисленных выше макросов с соответствующими значениями.
4. Нажмите **Обновить**, чтобы сохранить изменения.

## Использование

После импорта шаблона и настройки хоста с необходимыми макросами Zabbix начнет сбор данных с серверов Гравитон через API Redfish. Вы можете просматривать собранные данные и активированные предупреждения в панели управления Zabbix.

## Устранение неполадок

- Убедитесь, что конечная точка API Redfish доступна с сервера Zabbix.
- Проверьте правильность учетных данных API.
- Проверьте логи сервера и агента Zabbix на наличие сообщений об ошибках, связанных с шаблоном или сбором данных.

## Поддержка

В случае возникновения проблем с шаблоном или настройкой обратитесь к документации или форумам Zabbix за помощью.

## Примечания
Шаблон мониторинга также поддерживает работу на версиях Zabbix 4.4, 5.4 и 6.4.
Для работы шаблона на версии X.4, необходимо использовать версию шаблона для следующей мажорной версии Zabbix. Например, для Zabbix 6.4 может быть использован шаблон версии 7.0.
На некоторых платах могут наблюдаться ошибки Timeout при получении данных через API. Для их решения необходимо увеличить параметр Timeout в [конфигурации сервера Zabbix](https://www.zabbix.com/documentation/current/en/manual/appendix/config/zabbix_server)
